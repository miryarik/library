import"../styles/reset.css";import"../styles/styles.css";import deleteSvg from"../assets/icons/delete.svg";import readSvg from"../assets/icons/read.svg";import unreadSvg from"../assets/icons/unread.svg";class Book{constructor(e,t,d,r){this.name=e,this.author=t,this.pages=d,this.read=r}index=()=>myLibrary.includes(this)?myLibrary.indexOf(this):myLibrary.length}let myLibrary=[];const book0=new Book("Welcome To Libby","Mir Yarik",36,!1),cardsDiv=document.querySelector(".cards");function addBookToLibrary(e){myLibrary.push(e);const t=makeBookCard(e);cardsDiv.appendChild(t)}function removeBookFromLibrary(e){myLibrary.splice(e,1),displayBooks()}function displayBooks(){cardsDiv.innerHTML="",myLibrary.forEach((e=>{const t=makeBookCard(e);cardsDiv.appendChild(t)}))}function toggleRead(e,t){const d=document.createElement("img");d.classList.add("icon"),e.read?(e.read=!1,t.innerText="Unread",t.setAttribute("id","unread"),d.src=unreadSvg):(e.read=!0,t.innerText="Read",t.setAttribute("id","read"),d.src=readSvg),t.appendChild(d)}function makeBookCard(e){const t=document.createElement("div");t.classList.add("card"),t.setAttribute("id",`${e.index()}`);const d=document.createElement("div");d.classList.add("info");const r=document.createElement("div");r.classList.add("title");const a=document.createElement("h2");a.innerText=e.name,r.appendChild(a);const i=document.createElement("div");i.classList.add("author");const n=document.createElement("h3");n.innerText=e.author,i.appendChild(n);const o=document.createElement("div");o.classList.add("pages");const s=document.createElement("p");e.pages=e.pages<99999999&&e.pages>-1?e.pages:0,s.innerText=1==e.pages?`${e.pages} page`:`${e.pages} pages`,o.appendChild(s),[r,i,o].forEach((e=>{d.appendChild(e)})),t.appendChild(d);const c=document.createElement("div");c.classList.add("options");const l=document.createElement("div");l.classList.add("delete");const u=document.createElement("button");u.setAttribute("id","delete"),u.innerText="Delete",l.appendChild(u);const m=document.createElement("img");m.classList.add("icon"),m.src=deleteSvg,u.appendChild(m);const p=document.createElement("div");p.classList.add("read");const y=document.createElement("button");y.setAttribute("id",e.read?"read":"unread"),y.innerText=e.read?"Read":"Unread",p.appendChild(y);const v=document.createElement("img");return v.classList.add("icon"),v.src=e.read?readSvg:unreadSvg,y.appendChild(v),[l,p].forEach((e=>{c.appendChild(e)})),t.appendChild(c),u.addEventListener("click",(()=>{removeBookFromLibrary(t.getAttribute("id"))})),y.addEventListener("click",(()=>{toggleRead(e,y),y.blur()})),t}document.addEventListener("DOMContentLoaded",(e=>{addBookToLibrary(book0),displayBooks();const t=document.querySelector("dialog.add-book-modal"),d=document.querySelector("#add-book-btn");function r(){let e=t.querySelector("input#title").value,d=t.querySelector("input#author").value,r=t.querySelector("input#pages").value,a=t.querySelector("input#read").checked;e&&(r=0==r?0:r,addBookToLibrary(new Book(e,d,r,a)),t.close(),t.querySelector("form").reset()),o.blur()}d.addEventListener("click",(()=>{d.blur(),t.showModal()}));const a=t.querySelector("input#title"),i=t.querySelector("input#author"),n=t.querySelector("input#pages"),o=(t.querySelector("input#read"),document.querySelector("#submit-book-btn"));o.addEventListener("click",(e=>{e.preventDefault(),(a.value.trim()?i.value.trim()?n.value&&!isNaN(n.value||parseInt(n.value)<0)?(a.setCustomValidity(""),i.setCustomValidity(""),n.setCustomValidity(""),1):(n.setCustomValidity("Enter a valid number of pages"),void n.reportValidity()):(i.setCustomValidity("Author is required"),i.reportValidity(),0):(a.setCustomValidity("Title is required"),a.reportValidity(),0))&&r()})),a.addEventListener("input",(()=>{a.setCustomValidity("")})),i.addEventListener("input",(()=>{i.setCustomValidity("")})),n.addEventListener("input",(()=>{n.setCustomValidity("")})),t.addEventListener("keypress",(e=>{"Enter"===e.key&&a&&(e.preventDefault(),r())})),t.querySelector("button#cancel").addEventListener("click",(()=>{t.close(),t.querySelector("form").reset()}))}));
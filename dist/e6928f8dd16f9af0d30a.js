import"../styles/reset.css";import"../styles/styles.css";import deleteSvg from"../assets/icons/delete.svg";import readSvg from"../assets/icons/read.svg";import unreadSvg from"../assets/icons/unread.svg";class Book{constructor(e,t,d,n){this.name=e,this.author=t,this.pages=d,this.read=n}index=()=>myLibrary.includes(this)?myLibrary.indexOf(this):myLibrary.length}let myLibrary=[];const book0=new Book("Welcome To Libby","Mir Yarik",36,!1),cardsDiv=document.querySelector(".cards");function addBookToLibrary(e){myLibrary.push(e);const t=makeBookCard(e);cardsDiv.appendChild(t)}function removeBookFromLibrary(e){myLibrary.splice(e,1),displayBooks()}function displayBooks(){cardsDiv.innerHTML="",myLibrary.forEach((e=>{const t=makeBookCard(e);cardsDiv.appendChild(t)}))}function toggleRead(e,t){const d=document.createElement("img");d.classList.add("icon"),e.read?(e.read=!1,t.innerText="Unread",t.setAttribute("id","unread"),d.src=unreadSvg):(e.read=!0,t.innerText="Read",t.setAttribute("id","read"),d.src=readSvg),t.appendChild(d)}function makeBookCard(e){const t=document.createElement("div");t.classList.add("card"),t.setAttribute("id",`${e.index()}`);const d=document.createElement("div");d.classList.add("info");const n=document.createElement("div");n.classList.add("title");const r=document.createElement("h2");r.innerText=e.name,n.appendChild(r);const a=document.createElement("div");a.classList.add("author");const o=document.createElement("h3");o.innerText=e.author,a.appendChild(o);const s=document.createElement("div");s.classList.add("pages");const c=document.createElement("p");e.pages=e.pages<99999999&&e.pages>-1?e.pages:0,c.innerText=1==e.pages?`${e.pages} page`:`${e.pages} pages`,s.appendChild(c),[n,a,s].forEach((e=>{d.appendChild(e)})),t.appendChild(d);const i=document.createElement("div");i.classList.add("options");const l=document.createElement("div");l.classList.add("delete");const u=document.createElement("button");u.setAttribute("id","delete"),u.innerText="Delete",l.appendChild(u);const m=document.createElement("img");m.classList.add("icon"),m.src=deleteSvg,u.appendChild(m);const p=document.createElement("div");p.classList.add("read");const y=document.createElement("button");y.setAttribute("id",e.read?"read":"unread"),y.innerText=e.read?"Read":"Unread",p.appendChild(y);const v=document.createElement("img");return v.classList.add("icon"),v.src=e.read?readSvg:unreadSvg,y.appendChild(v),[l,p].forEach((e=>{i.appendChild(e)})),t.appendChild(i),u.addEventListener("click",(()=>{removeBookFromLibrary(t.getAttribute("id"))})),y.addEventListener("click",(()=>{toggleRead(e,y),y.blur()})),t}document.addEventListener("DOMContentLoaded",(e=>{addBookToLibrary(book0),displayBooks();const t=document.querySelector("dialog.add-book-modal"),d=document.querySelector("#add-book-btn");function n(){let e=t.querySelector("input#title").value,d=t.querySelector("input#author").value,n=t.querySelector("input#pages").value,a=t.querySelector("input#read").checked;e&&(n=0==n?0:n,addBookToLibrary(new Book(e,d,n,a)),t.close(),t.querySelector("form").reset()),r.blur()}d.addEventListener("click",(()=>{d.blur(),t.showModal()}));const r=document.querySelector("#submit-book-btn");r.addEventListener("click",(e=>{e.preventDefault(),n()})),t.addEventListener("keypress",(e=>{"Enter"===e.key&&title&&(e.preventDefault(),n())})),t.querySelector("button#cancel").addEventListener("click",(()=>{t.close(),t.querySelector("form").reset()}))}));